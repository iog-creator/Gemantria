{"input": {"guard_name": "OA State", "failure_message": "OA State Mismatch: reality_green mismatch: PM_BOOTSTRAP.health=True vs REALITY_GREEN=False", "context": "reality.green check repeatedly failing on OA State even after running multiple times"}, "expected_output": {"root_cause": "Circular dependency: PM_BOOTSTRAP.health.reality_green is cached from REALITY_GREEN_SUMMARY.json. When reality.green fails, it writes false to summary. PM_BOOTSTRAP then reads false. On next run, OA state refresh reads false and compares against new true in summary.", "severity": "high", "affected_components": ["guard_oa_state.py", "guard_reality_green.py", "PM_BOOTSTRAP_STATE.json", "REALITY_GREEN_SUMMARY.json"], "remediation_steps": ["Disable PM_BOOTSTRAP.health.reality_green check in guard_oa_state.py (it's circular)", "Add OA state refresh AFTER final summary write in guard_reality_green.py", "Ensure write_oa_state() reads current REALITY_GREEN_SUMMARY, not stale"], "category": "circular_dependency"}}
{"input": {"guard_name": "Root Surface", "failure_message": "Found 2 unexpected file(s) in root: PM_HANDOFF_PROTOCOL.md, SHARE_FOLDER_ANALYSIS.md", "context": "reality.green failing on Root Surface but files were already deleted"}, "expected_output": {"root_cause": "REALITY_GREEN_SUMMARY.json contains stale check results from prior run. The actual files were deleted but the summary still shows failure from previous execution.", "severity": "medium", "affected_components": ["share/REALITY_GREEN_SUMMARY.json", "guard_root_surface_policy.py"], "remediation_steps": ["Run reality.green again to refresh the summary with current file state", "Delete the files using rm if they still exist", "Verify files are actually gone with ls before assuming stale data"], "category": "stale_state"}}
{"input": {"guard_name": "Backup System", "failure_message": "No recent backup found", "context": "reality.green blocks on backup check, cannot proceed"}, "expected_output": {"root_cause": "Backup check in strict mode requires recent backup but none exists. This blocks all reality.green runs.", "severity": "medium", "affected_components": ["guard_backup_recent.py", "guard_reality_green.py"], "remediation_steps": ["Run make backup.surfaces to create a fresh backup", "Modify check_backup_system() to auto-create backup if missing instead of failing", "Set backup timeout to reasonable value (5 minutes is too short for long housekeeping)"], "category": "missing_prerequisite"}}
{"input": {"guard_name": "OA State", "failure_message": "reality_green mismatch: OA=False vs REALITY_GREEN=True", "context": "OA STATE.json shows reality_green=false but REALITY_GREEN_SUMMARY shows true"}, "expected_output": {"root_cause": "OA state was refreshed before final summary was written. write_oa_state() reads REALITY_GREEN_SUMMARY.json which had false from prior failed run. Then reality.green writes true to summary but OA state already has stale false.", "severity": "high", "affected_components": ["pmagent/oa/state.py", "guard_reality_green.py"], "remediation_steps": ["Move write_oa_state() call to AFTER final REALITY_GREEN_SUMMARY.json is written", "Remove redundant OA refresh from check_oa_state() wrapper", "Ensure OA reads fresh summary data before guard comparison"], "category": "execution_order"}}
{"input": {"guard_name": "DMS Alignment", "failure_message": "pmagent control-plane DMS Alignment BROKEN: Extra in share: 1", "context": "DMS shows extra file in share that is not in registry"}, "expected_output": {"root_cause": "A file exists in share/ directory that is not registered in the DMS doc_registry table. This often happens when files are manually created or copied without running housekeeping.", "severity": "low", "affected_components": ["share/", "control.doc_registry", "guard_dms_alignment.py"], "remediation_steps": ["Identify the extra file using the guard output details", "Either delete the file if unneeded or register it in DMS via make housekeeping", "Run make share.sync to synchronize share with DMS"], "category": "registry_drift"}}
