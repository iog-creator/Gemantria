---
description: DB safety and SQL discipline
globs:
  - src/infra/db.py
  - db/migrations/**/*
alwaysApply: false
---

- Never INSERT/UPDATE/DELETE against bible_db.
- All SQL must use %s parameters; no f-strings or string interpolation.
- Add indices for expected query patterns; enforce unique(content_hash) where applicable.
- Provide migration tests that apply and rollback cleanly.