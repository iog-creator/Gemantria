{

  "$id": "gemantria:ssot:ai-nouns:v1",

  "title": "AI Nouns SSOT",

  "type": "object",

  "required": ["schema","book","generated_at","nodes"],

  "properties": {

    "schema": { "const": "gematria/ai-nouns.v1" },

    "book": { "type": "string" },

    "generated_at": { "type": "string", "format": "date-time" },

    "nodes": {

      "type": "array",

      "items": {

        "type": "object",

        "required": ["noun_id","surface","letters","gematria","class","ai_discovered","sources"],

        "properties": {

          "noun_id": { "type": "string" },
          "surface": { "type": "string", "minLength": 1 },
          "lemma": { "type": ["string","null"] },
          "letters": {
            "type":"array","minItems":1,
            "items":{"type":"string","minLength":1,"maxLength":1}
          },
          "gematria": { "type":"integer","minimum":0 },
          "class": { "type":"string","enum":["person","place","thing","other"] },
          "ai_discovered": { "type":"boolean","const": true },
          "analysis": { "type":"object" },
          "sources": {
            "type":"array","minItems":1,
            "items":{"type":"object","required":["ref"],"properties":{
              "ref":{"type":"string"},
              "offset":{"type":["integer","null"]}
            }}
          },
          "xrefs": {
            "type": "array",
            "description": "Cross-references preserved from model output.",
            "items": { "$ref": "#/$defs/xref" },
            "default": []
          },
          "links": {
            "type": "array",
            "description": "Legacy/alias for xrefs; will be normalized downstream.",
            "items": { "$ref": "#/$defs/xref" },
            "default": []
          }

        }

      }

    }

  },

  "$defs": {
    "xref": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "book": { "type": "string" },
        "chapter": { "type": "integer", "minimum": 1 },
        "verse": { "type": "integer", "minimum": 1 },
        "ref": { "type": "string", "description": "Optional human-readable ref (e.g., Genesis 1:1)" }
      },
      "required": ["book","chapter","verse"]
    }
  }

}
