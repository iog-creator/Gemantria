{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gemantria.ai/schemas/pattern-forecast",
  "title": "Pattern Forecast Analytics Schema",
  "description": "JSON schema for forecasting temporal patterns using statistical models",
  "type": "object",
  "properties": {
    "forecasts": {
      "type": "array",
      "description": "Array of forecast records for temporal series",
      "items": {
        "type": "object",
        "required": ["series_id", "horizon", "model", "predictions", "book"],
        "properties": {
          "series_id": {
            "type": "string",
            "description": "Identifier for the concept or cluster being forecasted"
          },
          "horizon": {
            "type": "integer",
            "minimum": 1,
            "description": "Number of time steps to forecast ahead"
          },
          "model": {
            "type": "string",
            "enum": ["naive", "sma", "arima"],
            "description": "Forecasting model used (naive, simple moving average, or ARIMA)"
          },
          "predictions": {
            "type": "array",
            "items": {
              "type": "number"
            },
            "description": "Array of forecasted values for each horizon step"
          },
          "book": {
            "type": "string",
            "description": "Biblical book this forecast belongs to"
          },
          "prediction_intervals": {
            "type": "object",
            "properties": {
              "lower": {
                "type": "array",
                "items": {
                  "type": "number"
                },
                "description": "Lower bound of prediction intervals"
              },
              "upper": {
                "type": "array",
                "items": {
                  "type": "number"
                },
                "description": "Upper bound of prediction intervals"
              },
              "confidence_level": {
                "type": "number",
                "minimum": 0,
                "maximum": 1,
                "description": "Confidence level for prediction intervals (e.g., 0.95)"
              }
            },
            "description": "Prediction intervals for uncertainty quantification"
          },
          "rmse": {
            "type": "number",
            "description": "Root Mean Square Error of the forecast model"
          },
          "mae": {
            "type": "number",
            "description": "Mean Absolute Error of the forecast model"
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata about the forecast"
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "required": ["generated_at", "forecast_parameters"],
      "properties": {
        "generated_at": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when forecasts were generated"
        },
        "forecast_parameters": {
          "type": "object",
          "properties": {
            "default_horizon": {
              "type": "integer",
              "minimum": 1
            },
            "default_model": {
              "type": "string",
              "enum": ["naive", "sma", "arima"]
            },
            "min_training_length": {
              "type": "integer",
              "minimum": 1
            }
          }
        },
        "total_forecasts": {
          "type": "integer",
          "description": "Total number of forecasts generated"
        },
        "books_forecasted": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of biblical books with forecasts"
        },
        "model_distribution": {
          "type": "object",
          "properties": {
            "naive": {
              "type": "integer",
              "description": "Number of naive model forecasts"
            },
            "sma": {
              "type": "integer",
              "description": "Number of simple moving average forecasts"
            },
            "arima": {
              "type": "integer",
              "description": "Number of ARIMA model forecasts"
            }
          },
          "description": "Distribution of forecasting models used"
        },
        "average_metrics": {
          "type": "object",
          "properties": {
            "rmse": {
              "type": "number",
              "description": "Average RMSE across all forecasts"
            },
            "mae": {
              "type": "number",
              "description": "Average MAE across all forecasts"
            }
          },
          "description": "Average performance metrics"
        }
      }
    }
  },
  "required": ["forecasts", "metadata"]
}
