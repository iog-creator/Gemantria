# Gemantria — Ruff SSOT
# Single formatter; minimal, pragmatic lint ignores to unblock local runs.

line-length = 120
target-version = "py311"

[format]
line-ending = "lf"

[lint]
select = ["E","F","B","UP","RUF"]
# Pragmatic relaxations to avoid mass churn in legacy code:
ignore = [
  "E501",   # line too long — formatting handles this; avoid churn in long literals/URLs
  "E401",   # multiple imports on one line — style-only
  "UP006",  # typing.List -> list — modernization, not functional
  "UP035",  # typing.Collection -> collections.abc — modernization
  "RUF100", # unused noqa (common after ignoring E501) — avoid churn removing now-superfluous comments
]

[lint.per-file-ignores]
# Allow long/script-like files to breathe during transition
"scripts/**/*.py" = ["E501"]

# Hebrew/core modules legitimately use non-ASCII; allow ambiguous unicode there
"src/core/**/*.py" = ["RUF001","RUF002","RUF003","I001","UP037"]

# Graph entrypoint has import-order/bootstrap nuances; allow module-top import placement + style nit
"src/graph/graph.py" = ["E402","UP028"]

# Eval scripts often carry temp vars/placeholders during smoke runs
"scripts/eval/**/*.py" = ["F841","RUF005","E722","E501","E401","I001","F401"]

# Specific files with unique issues
"**/build_release_notes.py" = ["F821","RUF001","RUF003"]
"**/run_eval.py" = ["RUF003"]
"scripts/rules_audit.py" = ["RUF002"]

# Infra files: import ordering, yield style
"src/infra/**/*.py" = ["E402","UP028"]
"src/graph/**/*.py" = ["I001","RUF022"]

# Nodes: import ordering
"src/nodes/**/*.py" = ["UP035"]
